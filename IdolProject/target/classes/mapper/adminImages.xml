<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



	<mapper namespace="imagesDAO">
	
		<insert id="insertImage" parameterType="imagesDTO">
			<selectKey resultType="int" keyProperty="image_no" order="BEFORE">
				select max(image_no) from images
			</selectKey>
			insert into images values(#{image_no} + 1, #{image_path}, 
				#{image_link}, #{image_priority}, #{image_visible})
		</insert>
	
		<select id="imageList" resultType="imagesDTO">
			select * from images order by image_no
		</select>
		
		<select id="imagesCont" parameterType="int" resultType="imagesDTO">
			select * from images where image_no = #{no}
		</select>
	
		<delete id="imageDelete" parameterType="int">
			delete from images where image_no = #{no}
		</delete>
	
		<update id="imageDeleteSeq" parameterType="int">
			<![CDATA[
				update images set image_no = image_no - 1 where image_no > #{no}
			]]>	
		</update>
	
	</mapper>

